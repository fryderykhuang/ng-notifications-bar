/*! ng-notifications-bar - v0.0.16 (http://beletsky.net/ng-notifications-bar/) */
!function(root,factory){"object"==typeof exports?module.exports=factory(root,require("angular")):"function"==typeof define&&define.amd?define(["angular"],function(angular){return root.ngNotificationsBar=factory(root,angular)}):root.ngNotificationsBar=factory(root,root.angular)}(this,function(window,angular){var module=angular.module("ngNotificationsBar",[]);return module.provider("notificationsConfig",function(){function setHideDelay(value){config.hideDelay=value}function getHideDelay(){return config.hideDelay}function setAcceptHTML(value){config.acceptHTML=value}function getAcceptHTML(){return config.acceptHTML}function setAutoHide(value){config.autoHide=value}function setAutoHideAnimation(value){config.autoHideAnimation=value}function getAutoHideAnimation(){return config.autoHideAnimation}function setAutoHideAnimationDelay(value){config.autoHideAnimationDelay=value}function getAutoHideAnimationDelay(){return config.autoHideAnimationDelay}function getAutoHide(){return config.autoHide}var config={};return{setHideDelay:setHideDelay,setAutoHide:setAutoHide,setAutoHideAnimation:setAutoHideAnimation,setAutoHideAnimationDelay:setAutoHideAnimationDelay,setAcceptHTML:setAcceptHTML,$get:function(){return{getHideDelay:getHideDelay,getAutoHide:getAutoHide,getAutoHideAnimation:getAutoHideAnimation,getAutoHideAnimationDelay:getAutoHideAnimationDelay,getAcceptHTML:getAcceptHTML}}}}),module.factory("notifications",["$rootScope",function($rootScope){var showError=function(message,buttons){$rootScope.$broadcast("notifications:error",{message:message,buttons:buttons})},showWarning=function(message,buttons){$rootScope.$broadcast("notifications:warning",{message:message,buttons:buttons})};return{showError:showError,showInfo:function(message,buttons){$rootScope.$broadcast("notifications:info",{message:message,buttons:buttons})},showWarning:showWarning,showSuccess:function(message,buttons){$rootScope.$broadcast("notifications:success",{message:message,buttons:buttons})},closeAll:function(){$rootScope.$broadcast("notifications:closeAll")}}}]),module.directive("notificationsBar",["notificationsConfig","$timeout",function(notificationsConfig,$timeout){return{restrict:"EA",template:function(elem,attr){var acceptHTML=notificationsConfig.getAcceptHTML()||!1,iconClasses=attr.closeicon||"glyphicon glyphicon-remove";return acceptHTML?'\t\t\t\t\t<div class="notifications-container" ng-if="notifications.length">\t\t\t\t\t\t<div class="{{note.type}}" ng-repeat="note in notifications" ng-class="note.animation">\t\t\t\t\t\t\t<span class="message" ng-bind-html="note.message"></span>\t\t\t\t\t\t\t<div class="buttons-container">\t\t\t\t\t\t\t\t<span ng-repeat="(text, cb) in note.buttons" class="'+notificationsConfig.buttonClasses+' buttons" ng-click="cb(close)">{{text}}</span>\t\t\t\t\t\t\t\t<span class="'+iconClasses+' close-click" ng-click="close($index)"></span>\t\t\t\t\t\t\t<div>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t':'\t\t\t\t\t<div class="notifications-container" ng-if="notifications.length">\t\t\t\t\t\t<div class="{{note.type}}" ng-repeat="note in notifications" ng-class="note.animation">\t\t\t\t\t\t\t<span class="message" >{{note.message}}</span>\t\t\t\t\t\t\t<div class="buttons-container">\t\t\t\t\t\t\t\t<span ng-repeat="(text, cb) in note.buttons" class="'+notificationsConfig.buttonClasses+' buttons" ng-click="cb(close)">{{text}}</span>\t\t\t\t\t\t\t\t<span class="'+iconClasses+' close-click" ng-click="close($index)"></span>\t\t\t\t\t\t\t<div>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t'},link:function(scope){var notifications=scope.notifications=[],autoHideDelay=notificationsConfig.getHideDelay()||3e3,autoHide=notificationsConfig.getAutoHide()||!1,autoHideAnimation=notificationsConfig.getAutoHideAnimation()||"",autoHideAnimationDelay=notificationsConfig.getAutoHideAnimationDelay()||1200,removeById=function(id){var found=-1;notifications.forEach(function(el,index){el.id===id&&(found=index,el.animation={},el.animation[autoHideAnimation]=!0,scope.$apply())}),found>=0&&$timeout(function(){notifications.splice(found,1)},autoHideAnimationDelay)},notificationHandler=function(event,data,type,animation){var message,hide=autoHide,hideDelay=autoHideDelay;"object"==typeof data?(message=data.message,hide=void 0===data.hide?autoHide:!!data.hide,hideDelay=data.hideDelay||hideDelay):message=data;var id="notif_"+(new Date).getTime();if(notifications.push({id:id,type:type,message:message,animation:animation,buttons:data.buttons}),hide)var timer=$timeout(function(){removeById(id),$timeout.cancel(timer)},hideDelay)};scope.$on("notifications:error",function(event,data){notificationHandler(event,data,"error")}),scope.$on("notifications:warning",function(event,data){notificationHandler(event,data,"warning")}),scope.$on("notifications:info",function(event,data){notificationHandler(event,data,"info")}),scope.$on("notifications:success",function(event,data){notificationHandler(event,data,"success")}),scope.$on("notifications:closeAll",function(){notifications.length=0}),scope.close=function(index){notifications.splice(index,1)}}}}]),module});